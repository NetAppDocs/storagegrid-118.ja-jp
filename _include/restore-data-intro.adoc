= どの手順 を使用すればよいですか。
:allow-uri-read: 




== どの手順 を使用すればよいですか。

可能なかぎり、Grid Managerの*[ボリュームのリストア]*ページを使用してオブジェクトデータをリストアします。

* ボリュームが* maintenance *>* Volume restore *>* Nodes to restore *に表示された場合は、を使用してオブジェクトデータをリストアします link:../maintain/restoring-volume.html["Grid Managerのボリュームリストアページ"]。
* ボリュームが* maintenance *>* Volume restoration *>* Nodes to restore *に表示されない場合は、を使用するために以下の手順を実行してください `repair-data` オブジェクトデータをリストアするスクリプト。
+
リカバリされたストレージノードのボリューム数が交換対象のノードよりも少ない場合は、を使用する必要があります `repair-data` スクリプト：




NOTE: repair-dataスクリプトは廃止され、今後のリリースで削除される予定です。可能な場合は、を使用します link:../maintain/restoring-volume.html["GridManagerテノホリユウムノリストア手順"]。



== を使用します `repair-data` オブジェクトデータをリストアするスクリプト

.作業を開始する前に
* リカバリされたストレージノードの接続状態が* Connected *であることを確認しておきます。 image:../media/icon_alert_green_checkmark.png["緑色のチェックマークのアイコン"] Grid Manager の * nodes * > * Overview * タブをクリックします。


.このタスクについて
グリッドの ILM ルールがオブジェクトコピーを作成するように設定されていた場合、他のストレージノード、アーカイブノード、またはクラウドストレージプールからオブジェクトデータをリストアできます。

次の点に注意してください。

* レプリケートされたコピーを 1 つだけ保存するように ILM ルールが設定されていて、そのコピーがストレージボリュームに障害が発生した場合、オブジェクトをリカバリすることはできません。
* オブジェクトのコピーがクラウドストレージプールにしか残っていない場合、 StorageGRID は、オブジェクトデータをリストアするために複数の要求をクラウドストレージプールエンドポイントに問題 する必要があります。この手順 を実行する前に、テクニカルサポートに問い合わせて、リカバリ期間と関連コストの見積もりを依頼してください。
* オブジェクトのコピーがアーカイブノードにしか残っていない場合は、アーカイブノードからオブジェクトデータが読み出されます。アーカイブノードからストレージノードへのオブジェクトデータのリストアでは、外部アーカイブストレージシステムからの読み出しにレイテンシが伴うため、他のストレージノードからコピーをリストアする場合に比べて時間がかかります。




== について `repair-data` スクリプト

オブジェクトデータをリストアするには、を実行します `repair-data` スクリプト：このスクリプトは、オブジェクトデータのリストアプロセスを開始し、 ILM スキャンと連動して ILM ルールを適用します。

以下の*レプリケートデータ*または*イレイジャーコーディング（EC）データ*を選択して、の各種オプションを確認してください `repair-data` レプリケートデータとイレイジャーコーディングデータのどちらをリストアするかに基づくスクリプト。両方のタイプのデータをリストアする必要がある場合は、両方のコマンドセットを実行する必要があります。


NOTE: 詳細については、を参照してください `repair-data` スクリプトを入力します `repair-data --help` プライマリ管理ノードのコマンドラインを使用します。


NOTE: repair-dataスクリプトは廃止され、今後のリリースで削除される予定です。可能な場合は、を使用します link:../maintain/restoring-volume.html["GridManagerテノホリユウムノリストア手順"]。

[role="tabbed-block"]
====
.レプリケートデータ
--
レプリケートデータをリストアするコマンドは、ノード全体を修復するのか、ノード上の一部のボリュームのみを修復するのかに応じて 2 つあります。

`repair-data start-replicated-node-repair`

`repair-data start-replicated-volume-repair`

レプリケートデータの修復は、次のコマンドで追跡できます。

`repair-data show-replicated-repair-status`

--
.イレイジャーコーディング（EC）データ
--
イレイジャーコーディングデータをリストアするコマンドは、ノード全体を修復するのか、ノード上の一部のボリュームのみを修復するのかに応じて 2 つあります。

`repair-data start-ec-node-repair`

`repair-data start-ec-volume-repair`

イレイジャーコーディングデータの修復は、次のコマンドで追跡できます。

`repair-data show-ec-repair-status`


NOTE: イレイジャーコーディングデータの修復は、一部のストレージノードがオフライン状態で開始できます。ただし、すべてのイレイジャーコーディングデータを把握できない場合は、修復を完了できません。修復はすべてのノードが使用可能になったあとに完了します。


NOTE: EC 修復ジョブによって、大量のストレージが一時的にリザーブされます。ストレージアラートがトリガーされることもありますが、修復が完了すると解決します。予約に必要なストレージが不足していると、 EC の修復ジョブが失敗します。ストレージリザベーションは、ジョブが失敗したか成功したかに関係なく、 EC 修復ジョブが完了すると解放されます。

--
====