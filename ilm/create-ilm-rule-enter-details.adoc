---
permalink: ilm/create-ilm-rule-enter-details.html 
sidebar: sidebar 
keywords: ILM rule step 1, define basics 
summary: ILMルールの作成ウィザードのステップ1（詳細を入力\）では、ルールの名前と概要 を入力し、ルールのフィルタを定義できます。 
---
= ステップ1 / 3：詳細を入力します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
[ILMルールの作成]ウィザードの*[詳細を入力]*ステップでは、ルールの名前と概要 を入力し、ルールのフィルタを定義できます。

概要 の入力とルールのフィルタの定義はオプションです。

.このタスクについて
に対してオブジェクトを評価する場合 link:what-ilm-rule-is.html["ILMルール"]StorageGRID は、オブジェクトメタデータをルールのフィルタと比較します。オブジェクトメタデータがすべてのフィルタに一致した場合、 StorageGRID はルールを使用してオブジェクトを配置します。すべてのオブジェクトに適用するルールを設計したり、 1 つ以上のテナントアカウントやバケット名などの基本的なフィルタや、オブジェクトのサイズやユーザメタデータなどの高度なフィルタを指定したりできます。

.手順
. [* 名前 *] フィールドに、ルールの一意の名前を入力します。
. 必要に応じて、ルールの短い概要 を * 概要 * フィールドに入力します。
+
あとから識別しやすいように、ルールの目的や機能を指定してください。

. 必要に応じて、このルールを適用する S3 または Swift テナントアカウントを 1 つ以上選択します。このルールですべてのテナントを環境 に設定する場合は、このフィールドを空白のままにします。
+
Root Access権限またはTenant accounts権限がない場合は、リストからテナントを選択できません。代わりに、テナント ID を入力するか、複数の ID をカンマで区切って入力します。

. 必要に応じて、このルールを適用する S3 バケットまたは Swift コンテナを指定します。
+
環境all buckets *が選択されている場合（デフォルト）は、環境All S3 BucketsまたはSwift containersルールです。

. S3テナントの場合は、必要に応じて*[Yes]*を選択して、バージョン管理が有効になっているS3バケット内の古いオブジェクトバージョンにのみルールを適用します。
+
* Yes *を選択すると、 link:create-ilm-rule-define-placements.html["ILMルール作成ウィザードのステップ2"]。

+

NOTE: [Noncurrent time]は、バージョン管理が有効なバケット内のS3オブジェクトにのみ適用されます。を参照してください link:../s3/operations-on-buckets.html["バケットの処理、PutBucketVersioning"] および link:managing-objects-with-s3-object-lock.html["S3 オブジェクトロックでオブジェクトを管理します"]。

+
このオプションを使用すると、最新でないオブジェクトバージョンをフィルタリングすることで、バージョン管理オブジェクトによるストレージへの影響を軽減できます。を参照してください link:example-4-ilm-rules-and-policy-for-s3-versioned-objects.html["例 4 ： S3 バージョン管理オブジェクトの ILM ルールとポリシー"]。

. 必要に応じて、*[高度なフィルタを追加する]*を選択して、追加のフィルタを指定します。
+
高度なフィルタを設定しない場合は、基本フィルタに一致するすべてのオブジェクトを環境 というルールが適用されます。高度なフィルタリングの詳細については、を参照してください <<ILM ルールで高度なフィルタを使用します>> および <<複数のメタデータタイプと値を指定します>>。

. 「 * Continue * 」を選択します。 link:create-ilm-rule-define-placements.html["ステップ2（配置の定義）"] のCreate an ILM ruleウィザードが表示されます。




== ILM ルールで高度なフィルタを使用します

高度なフィルタを使用すると、メタデータに基づいて特定のオブジェクトにのみ適用する ILM ルールを作成できます。ルールに対して高度なフィルタを設定するには、照合するメタデータのタイプを選択し、演算子を選択して、メタデータ値を指定します。オブジェクトが評価されると、高度なフィルタに一致するメタデータを含むオブジェクトにのみ ILM ルールが適用されます。

次の表に、高度なフィルタで指定できるメタデータタイプ、各タイプのメタデータに使用できる演算子、および想定されるメタデータ値を示します。

[cols="1a,1a,2a"]
|===
| メタデータタイプ | サポートされる演算子 | メタデータ値 


 a| 
取り込み時間
 a| 
* はです
* そうではありません
* 以前のものです
* 以前のものです
* 後である
* がオンまたは後になっています

 a| 
オブジェクトが取り込まれた日時。

*注：*新しいILMポリシーをアクティブ化する際のリソースの問題を回避するために、大量の既存オブジェクトの場所を変更する可能性があるルールでは、高度なフィルタとして取り込み時間を使用できます。新しいポリシーが有効になるおおよその時間以上に取り込み時間を設定して、既存のオブジェクトが不要に移動されないようにします。



 a| 
キーを押します
 a| 
* が等しい
* が同じではありません
* が含まれます
* にはを含めません
* がで始まります
* で始まるものではありません
* が次の値で終わる
* で終わることはありません

 a| 
一意の S3 または Swift オブジェクトキーのすべてまたは一部。

たとえば、で終わるオブジェクトを照合できます `.txt` またはで開始します `test-object/`。



 a| 
最終アクセス時間
 a| 
* はです
* そうではありません
* 以前のものです
* 以前のものです
* 後である
* がオンまたは後になっています

 a| 
オブジェクトが最後に読み出された（読み取られた、または表示された）日時。

*注：*予定がある場合 link:using-last-access-time-in-ilm-rules.html["最終アクセス時間を使用"] 高度なフィルタとして、S3バケットまたはSwiftコンテナに対して最終アクセス時間の更新を有効にする必要があります。



 a| 
場所の制約（S3のみ）
 a| 
* が等しい
* が同じではありません

 a| 
S3 バケットが作成されたリージョン。表示されるリージョンを定義するには、 * ilm * > * Regions * を使用します。

* 注： us-east-1 の値は、 us-east-1 リージョンで作成されたバケット内のオブジェクト、およびリージョンが指定されていないバケット内のオブジェクトに一致します。を参照してください link:configuring-regions-optional-and-s3-only.html["リージョンを設定（オプション、 S3 のみ）"]。



 a| 
オブジェクトのサイズ
 a| 
* が等しい
* が同じではありません
* より小さい
* 以下
* が次の値より大きい
* 以上

 a| 
オブジェクトのサイズ。

イレイジャーコーディングは 1MB を超えるオブジェクトに適しています。非常に小さいイレイジャーコーディングフラグメントを管理するオーバーヘッドを回避するために、200KB未満のオブジェクトにはイレイジャーコーディングを使用しないでください。



 a| 
ユーザメタデータ
 a| 
* が含まれます
* が次の値で終わる
* が等しい
* が存在します
* がで始まります
* にはを含めません
* で終わることはありません
* が同じではありません
* は存在しません
* で始まるものではありません

 a| 
キーと値のペア。* User metadata name *はキー、* Metadata Value *は値です。

たとえば、ユーザメタデータがあるオブジェクトでフィルタリングするには、のように指定します `color=blue`、を指定します `color` ユーザメタデータ名*の場合、 `equals` 演算子の場合は、および `blue` [Metadata Value]*の場合。

*注：*ユーザーメタデータ名では大文字と小文字は区別されません。ユーザーメタデータ値では大文字と小文字が区別されます。



 a| 
オブジェクトタグ（S3のみ）
 a| 
* が含まれます
* が次の値で終わる
* が等しい
* が存在します
* がで始まります
* にはを含めません
* で終わることはありません
* が同じではありません
* は存在しません
* で始まるものではありません

 a| 
キーと値のペア。* Object tag name *はキー、* Object tag value *は値です。

たとえば、オブジェクトタグがのオブジェクトでフィルタリングする場合などです `Image=True`、を指定します `Image` オブジェクトタグ名*の場合、 `equals` 演算子の場合は、および `True` オブジェクトタグ値*の場合。

* 注： * オブジェクトタグ名とオブジェクトタグ値では、大文字と小文字が区別されます。これらの項目は、オブジェクトに対して定義されたとおりに正確に入力する必要があります。

|===


== 複数のメタデータタイプと値を指定します

高度なフィルタを定義する場合は、複数のタイプのメタデータと複数のメタデータ値を指定できます。たとえば、サイズが10~100MBのオブジェクトに一致するルールを設定する場合は、メタデータタイプ*[オブジェクトサイズ]*を選択し、2つのメタデータ値を指定します。

* 最初のメタデータ値で 10MB 以上のオブジェクトを指定します。
* 2 番目のメタデータ値で 100MB 以下のオブジェクトを指定します。


image::../media/advanced_filtering_size_between.png[オブジェクトサイズの高度なフィルタの例]

複数のエントリを使用すると、照合するオブジェクトを正確に制御できます。次の例では、camera_typeユーザメタデータの値がブランドAまたはブランドBであるルール環境オブジェクトを指定しています。ただし、ルールでは、 10MB より小さい Brand B のオブジェクトのみが環境 されます。

image::../media/advanced_filtering_multiple_rows.png[ユーザメタデータの高度なフィルタの例]
